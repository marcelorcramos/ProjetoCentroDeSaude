<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Produtos</title>
    <link rel="stylesheet" href="style2.css">
</head>
<body>
    <div class="container-admin">
        <div class="sidebar">
            <h2>Painel Admin</h2>
            <ul>
                <a href="admin.html">
                    <li>Criar Produto</li>
                </a>
                <li>Lista de Produtos</li>
                <a href="home.html"><button class="home">Voltar para Home</button></a>
            </ul>
        </div>
        <div class="content">
            <h1>Lista de Produtos</h1>
            <div id="product-list"></div>
        </div>
    </div>
    <script>

function saveProduct(event) {
            event.preventDefault();

            // Captura os valores dos campos
            const title = document.getElementById('title').value;
            const content = document.getElementById('content').value;
            const price = document.getElementById('price').value;
            const images = document.getElementById('images').files;

            // Verifica se os campos obrigatórios estão preenchidos
            if (!title || !content || !price) {
                alert('Preencha todos os campos obrigatórios!');
                return;
            }

            // Cria um objeto para representar o produto
            const product = {
                id: new Date().getTime(), // ID único baseado no timestamp
                title: title,
                content: content,
                price: parseFloat(price).toFixed(2),
                images: []
            };

            // Converte as imagens para URLs (opcional)
            if (images.length > 0) {
                for (let i = 0; i < images.length; i++) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        product.images.push(e.target.result);
                    };
                    reader.readAsDataURL(images[i]);
                }
            }

            // Recupera a lista de produtos do LocalStorage
            let products = JSON.parse(localStorage.getItem('products')) || [];

            // Adiciona o novo produto à lista
            products.push(product);

            // Salva a lista atualizada no LocalStorage
            localStorage.setItem('products', JSON.stringify(products));

            // Limpa os campos do formulário
            document.getElementById('title').value = '';
            document.getElementById('content').value = '';
            document.getElementById('price').value = '';
            document.getElementById('images').value = '';

            alert('Produto salvo com sucesso!');
        }

        // Função para carregar e exibir os produtos na página adminlista.html
        function loadProducts() {
            const productList = document.getElementById('product-list');

            // Recupera a lista de produtos do LocalStorage
            const products = JSON.parse(localStorage.getItem('products')) || [];

            // Limpa a lista atual
            productList.innerHTML = '';

            // Exibe cada produto na lista
            products.forEach(product => {
                const productItem = document.createElement('div');
                productItem.className = 'product-item';
                productItem.innerHTML = `
                    <h3>${product.title}</h3>
                    <p>${product.content}</p>
                    <p><strong>Preço:</strong> $${product.price}</p>
                    <div class="product-images">
                        ${product.images.map(image => `<img src="${image}" alt="${product.title}" width="100">`).join('')}
                    </div>
                `;
                productList.appendChild(productItem);
            });
        }

        // Adiciona o evento de salvar produto ao botão "Salvar Produto"
        document.addEventListener('DOMContentLoaded', function () {
            const saveButton = document.querySelector('.save');
            if (saveButton) {
                saveButton.addEventListener('click', saveProduct);
            }

            // Carrega os produtos na página adminlista.html
            if (window.location.pathname.includes('adminlista.html')) {
                loadProducts();
            }
        });
    </script>
</body>
</html>